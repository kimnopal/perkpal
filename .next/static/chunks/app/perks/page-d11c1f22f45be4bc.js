(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[448],{4489:(r,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>l});var t=a(5155),s=a(2115);function l(){let[r,e]=(0,s.useState)([]),[a,l]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0),[c,n]=(0,s.useState)(!1),[i,u]=(0,s.useState)(null),[g,m]=(0,s.useState)("all"),[b,x]=(0,s.useState)("all"),k=async(r,e)=>{try{n(!0);let a="".concat("http://perkpal-cms.pastilulus.me/api","/perks?populate=*");r&&"all"!==r&&(a+="&filters[category][slug][$eq]=".concat(r)),e&&"all"!==e&&(a+="&filters[sub_category][slug][$eq]=".concat(e));let t=await fetch(a,{cache:"no-store"});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let s=await t.json();s.data&&Array.isArray(s.data)?l(s.data):(console.error("Invalid perks data structure:",s),l([]))}catch(r){console.error("Error fetching perks:",r),l([])}finally{n(!1)}};(0,s.useEffect)(()=>{(async()=>{try{let r=await fetch("".concat("http://perkpal-cms.pastilulus.me/api","/categories?populate=sub_categories"),{cache:"no-store"});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let a=await r.json();a.data&&Array.isArray(a.data)?e(a.data):(console.error("Invalid categories data structure:",a),u("Invalid data structure received from API")),d(!1)}catch(r){u(r instanceof Error?r.message:"Failed to fetch categories"),d(!1),console.error("Error fetching categories:",r)}})(),k()},[]),(0,s.useEffect)(()=>{k(g,b)},[g,b]);let h=r=>{m(r),x("all")},p=r=>{x(r)};return(0,t.jsxs)("div",{className:"max-w-7xl mx-auto py-12",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-background-dark dark:text-background-light mb-4",children:"Browse Perks"}),(0,t.jsx)("p",{className:"text-lg text-background-dark/70 dark:text-background-light/70 max-w-3xl mx-auto",children:"Exclusive deals for founders, freelancers, and remote workers in Malaysia & Singapore."})]}),(0,t.jsx)("div",{className:"flex justify-center mb-8",children:(0,t.jsx)("div",{className:"flex items-center gap-4 border-b-2 border-background-dark/10 dark:border-background-light/10 pb-4",children:o?(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"h-8 bg-background-dark/10 dark:bg-background-light/10 rounded animate-pulse w-20"}),(0,t.jsx)("div",{className:"h-8 bg-background-dark/10 dark:bg-background-light/10 rounded animate-pulse w-24"}),(0,t.jsx)("div",{className:"h-8 bg-background-dark/10 dark:bg-background-light/10 rounded animate-pulse w-16"})]}):i?(0,t.jsxs)("div",{className:"text-red-500 text-sm",children:["Failed to load categories: ",i]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>h("all"),className:"px-4 py-2 text-sm font-medium transition-colors ".concat("all"===g?"text-primary border-b-2 border-primary":"text-background-dark/70 dark:text-background-light/70 hover:text-primary dark:hover:text-primary"),children:"All Categories"}),r.map(r=>(0,t.jsx)("button",{onClick:()=>h(r.slug),className:"px-4 py-2 text-sm font-medium transition-colors ".concat(g===r.slug?"text-primary border-b-2 border-primary":"text-background-dark/70 dark:text-background-light/70 hover:text-primary dark:hover:text-primary"),children:r.name},r.id))]})})}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-4 mb-10 px-4 py-4 rounded-xl bg-background-dark/5 dark:bg-background-light/5",children:[(0,t.jsx)("span",{className:"font-semibold mr-4",children:"Filters:"}),!o&&!i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>p("all"),className:"px-3 py-1.5 rounded-full shadow-sm transition-colors text-xs font-medium border ".concat("all"===b?"bg-primary/20 border-primary text-primary":"bg-background-light dark:bg-background-dark border-background-dark/20 dark:border-background-light/20 hover:border-primary/30"),children:"All Sub Categories"},"filter-sub-all"),r.filter(r=>r.slug===g&&r.sub_categories&&r.sub_categories.length>0).flatMap(r=>r.sub_categories).map(r=>(0,t.jsx)("button",{onClick:()=>p(r.slug),className:"px-3 py-1.5 rounded-full shadow-sm transition-colors text-xs font-medium border ".concat(b===r.slug?"bg-primary/20 border-primary":"bg-background-light dark:bg-background-dark border-background-dark/20 dark:border-background-light/20 hover:border-primary/30"),children:r.name},"filter-sub-".concat(r.id))),(0,t.jsx)("div",{className:"w-px h-6 bg-background-dark/20 dark:bg-background-light/20 mx-2"})]}),(0,t.jsx)("button",{className:"px-4 py-2 rounded-full bg-background-light dark:bg-background-dark shadow-sm hover:bg-primary/20 dark:hover:bg-primary/30 transition-colors text-sm font-medium",children:"All Locations"}),(0,t.jsx)("button",{className:"px-4 py-2 rounded-full bg-background-light dark:bg-background-dark shadow-sm hover:bg-primary/20 dark:hover:bg-primary/30 transition-colors text-sm font-medium",children:"Malaysia"}),(0,t.jsx)("button",{className:"px-4 py-2 rounded-full bg-background-light dark:bg-background-dark shadow-sm hover:bg-primary/20 dark:hover:bg-primary/30 transition-colors text-sm font-medium",children:"Singapore"}),(0,t.jsx)("button",{className:"px-4 py-2 rounded-full bg-primary text-background-dark shadow-sm hover:bg-primary/90 transition-colors text-sm font-medium",children:"Global"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:a.length>0?a.map((r,e)=>{var a;return(0,t.jsxs)("div",{className:"bg-background-light dark:bg-background-dark rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300 flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{alt:r.logo.alternativeText,className:"w-full h-48 object-cover",src:"".concat("http://perkpal-cms.pastilulus.me").concat(r.logo.url)}),r.featured&&(0,t.jsx)("div",{className:"absolute top-3 right-3",children:(0,t.jsx)("span",{className:"bg-primary text-background-dark text-xs font-bold px-2 py-1 rounded-full",children:"Featured"})})]}),(0,t.jsxs)("div",{className:"p-6 flex flex-col flex-grow",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-2 line-clamp-2",children:r.title}),(0,t.jsx)("p",{className:"text-background-dark/70 dark:text-background-light/70 text-sm mb-4 flex-grow line-clamp-3",children:r.short_description}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("span",{className:"text-xs text-background-dark/50 dark:text-background-light/50 capitalize",children:null==(a=r.redemption_method)?void 0:a.replace("_"," ")}),r.valid_to&&(0,t.jsxs)("span",{className:"text-xs text-background-dark/50 dark:text-background-light/50",children:["Valid until ",new Date(r.valid_to).toLocaleDateString()]})]}),(0,t.jsx)("button",{className:"w-full rounded-lg bg-primary text-background-dark font-bold py-2.5 px-4 hover:bg-primary/90 transition-colors",children:"coupon_code"===r.redemption_method?"Get Code":"affiliate_link"===r.redemption_method?"Claim Perk":"Apply Now"})]})]},"".concat(r.slug,"-").concat(e))}):(0,t.jsxs)("div",{className:"col-span-full text-center py-16",children:[(0,t.jsx)("div",{className:"text-background-dark/50 dark:text-background-light/50 text-lg mb-4",children:"No perks found for the selected filters"}),(0,t.jsx)("p",{className:"text-background-dark/40 dark:text-background-light/40 text-sm",children:"Try selecting a different category or check back later for new perks"})]})})]})}},9429:(r,e,a)=>{Promise.resolve().then(a.bind(a,4489))}},r=>{r.O(0,[441,255,358],()=>r(r.s=9429)),_N_E=r.O()}]);